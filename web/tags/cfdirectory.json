{"HISTORY":"<!-- --><br>ColdFusion 9.0.1: Added the <samp class=\"codeph\">storeACL<\/samp> and <samp class=\"codeph\">storeLocation<\/samp> attributes.<br>ColdFusion 8: Added the <samp class=\"codeph\">listinfo<\/samp> and <samp class=\"codeph\">type<\/samp> attributes.<br>ColdFusion MX 7: Added the <samp class=\"codeph\">recurse<\/samp> attribute and <samp class=\"codeph\">directory<\/samp> result‑set column.<br>ColdFusion MX:<br><img src=\"images\/dingbat.png\" \/>&nbsp;Changed behavior for \n<samp class=\"codeph\">action = &quot;list&quot;: <\/samp>\n<ul>\n <li><p>On Windows, <samp class=\"codeph\">cfdirectory<\/samp><samp class=\"codeph\">action = &quot;list&quot;<\/samp> no longer returns the directory entries <samp class=\"codeph\">&quot;.&quot;<\/samp> (dot) or <samp class=\"codeph\">&quot;..&quot;<\/samp> (dot dot), which represent &quot;the current directory&quot; and &quot;the parent directory.&quot;<\/p> <\/li> \n <li><p>On Windows, <samp class=\"codeph\">cfdirectory<\/samp><samp class=\"codeph\">action = &quot;list&quot;<\/samp> no longer returns the values of the Archive and System attributes.<\/p> <\/li> \n <li><p>On UNIX and Linux, <samp class=\"codeph\">cfdirectory<\/samp><samp class=\"codeph\">action = &quot;list&quot;<\/samp> does not return any information in the <samp class=\"codeph\">mode<\/samp> column.<\/p> <\/li> \n<\/ul><br>","SYNTAX":"<!-- --><br>&lt;cfdirectory  \r\n    directory = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">directory name<\/i>&quot; \r\n    action = &quot;list|create|delete|rename&quot; \r\n    filter = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">list filter<\/i>&quot; \r\n    listInfo = &quot;name|all&quot; \r\n    mode = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">permission<\/i>&quot; \r\n    name = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">query name<\/i>&quot; \r\n    newDirectory = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">new directory name<\/i>&quot; \r\n    recurse = &quot;yes|no&quot; \r\n    sort = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">sort specification<\/i>&quot; \r\n    storeACL = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">S3_premissions<\/i>&quot; \r\n    storeLocation = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">location<\/i>&quot; \r\n    type = &quot;file|dir|all&quot;&gt;<br><span class=\"notetitle\">Note: <\/span>You can specify this tag’s attributes in an \n<samp class=\"codeph\">attributeCollection<\/samp> attribute whose value is a structure. Specify the structure name in the \n<samp class=\"codeph\">attributeCollection<\/samp> attribute and use the tag’s attribute names as structure keys.<br>","CATEGORY":"File management tags","PAGENAME":"cfdirectory","SEEALSO":"<!-- --><br><samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-7fa1.html\">cffile<\/a><\/samp><br>","DESCRIPTION":"Manages interactions with directories.","LICENCE":"http:\/\/help.adobe.com\/en_US\/ColdFusion\/10.0\/LegalNotices\/index.html","EXAMPLE":"<!-- --><br>&lt;!--- EXAMPLE 1: Creating and Renaming  \r\nCheck that the directory exists to avoid getting a ColdFusion error message. ---&gt; \r\n&lt;cfset newDirectory = &quot;otherNewDir&quot;&gt; \r\n&lt;cfset currentDirectory = GetDirectoryFromPath(GetTemplatePath()) &amp; &quot;newDir&quot;&gt; \r\n&lt;!--- Check whether the directory exists. ---&gt; \r\n&lt;cfif DirectoryExists(currentDirectory)&gt; \r\n&lt;!--- If yes, rename the directory. ---&gt;  \r\n    &lt;cfdirectory action = &quot;rename&quot; directory = &quot;#currentDirectory#&quot;  \r\n        newDirectory = &quot;#newDirectory#&quot; &gt; \r\n    &lt;cfoutput&gt; \r\n    &lt;p&gt;The directory existed and the name has been changed to: #newDirectory#&lt;\/p&gt; \r\n    &lt;\/cfoutput&gt; \r\n&lt;cfelse&gt; \r\n    &lt;!--- If no, create the directory. ---&gt; \r\n    &lt;cfdirectory action = &quot;create&quot; directory = &quot;#currentDirectory#&quot; &gt; \r\n    &lt;cfoutput&gt;&lt;p&gt;Your directory has been created.&lt;\/p&gt;&lt;\/cfoutput&gt; \r\n&lt;\/cfif&gt; \r\n \r\n&lt;!--- EXAMPLE 2: Deleting a directory  \r\nCheck that the directory exists and that files are not in the directory to avoid getting ColdFusion error messages. ---&gt; \r\n \r\n&lt;cfset currentDirectory = GetDirectoryFromPath(GetTemplatePath()) &amp; &quot;otherNewDir&quot;&gt; \r\n&lt;!--- Check whether the directory exists. ---&gt; \r\n&lt;cfif DirectoryExists(currentDirectory)&gt; \r\n    &lt;!--- If yes, check whether there are files in the directory before deleting. ---&gt; \r\n    &lt;cfdirectory action=&quot;list&quot; directory=&quot;#currentDirectory#&quot;  \r\n    name=&quot;myDirectory&quot;&gt; \r\n    &lt;cfif myDirectory.recordcount gt 0&gt; \r\n    &lt;!--- If yes, delete the files from the directory. ---&gt; \r\n        &lt;cfoutput&gt; \r\n        &lt;p&gt;Files exist in this directory. Either delete the files or code  \r\n            something to do so.&lt;\/P&gt; \r\n        &lt;\/cfoutput&gt;  \r\n    &lt;cfelse&gt; \r\n    &lt;!--- Directory is empty - just delete the directory. ---&gt; \r\n        &lt;cfdirectory action = &quot;delete&quot; directory = &quot;#currentDirectory#&quot;&gt; \r\n        &lt;cfoutput&gt; \r\n        &lt;p&gt;The directory existed and has been deleted.&lt;\/P&gt; \r\n        &lt;\/cfoutput&gt; \r\n    &lt;\/cfif&gt;  \r\n&lt;cfelse&gt; \r\n    &lt;!--- If no, post message or do some other function. ---&gt; \r\n    &lt;cfoutput&gt;&lt;p&gt;The directory did NOT exist.&lt;\/p&gt;&lt;\/cfoutput&gt; \r\n&lt;\/cfif&gt;  \r\n&lt;!---EXAMPLE 3: List directories  \r\nThe following example creates both an array of directory names and a query that contains entries for the directories only. ---&gt; \r\n \r\n&lt;cfdirectory directory=&quot;C:\/temp&quot; name=&quot;dirQuery&quot; action=&quot;LIST&quot;&gt; \r\n \r\n&lt;!--- Get an array of directory names. ---&gt; \r\n&lt;cfset dirsArray=arraynew(1)&gt; \r\n&lt;cfset i=1&gt; \r\n&lt;cfloop query=&quot;dirQuery&quot;&gt; \r\n&lt;cfif dirQuery.type IS &quot;dir&quot;&gt; \r\n    &lt;cfset dirsArray[i]=dirQuery.name&gt; \r\n    &lt;cfset i = i + 1&gt; \r\n&lt;\/cfif&gt; \r\n&lt;\/cfloop&gt; \r\n&lt;cfdump var=&quot;#dirsArray#&quot;&gt; \r\n&lt;br&gt; \r\n&lt;!--- Get all directory information in a query of queries.---&gt; \r\n&lt;cfquery dbtype=&quot;query&quot; name=&quot;dirsOnly&quot;&gt; \r\nSELECT * FROM dirQuery \r\nWHERE TYPE='Dir' \r\n&lt;\/cfquery&gt; \r\n&lt;cfdump var=&quot;#dirsOnly#&quot;&gt;<br>","USAGE":"<!-- --><br>If you put ColdFusion applications on a server that is used by multiple customers, you must consider the security of files and directories that could be uploaded or otherwise manipulated with this tag by unauthorized users. For more information about securing ColdFusion tags, see <i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">Configuring and Administering ColdFusion<\/i>.<br>If <samp class=\"codeph\">action = &quot;list&quot;<\/samp>, <samp class=\"codeph\">cfdirectory<\/samp> returns the following result columns, which you can reference in a <samp class=\"codeph\">cfoutput<\/samp> tag:<br><li><p><samp class=\"codeph\">name<\/samp>: Directory entry name. The entries <samp class=\"codeph\">&quot;.&quot;<\/samp> and <samp class=\"codeph\">&quot;..&quot; <\/samp>are not returned. <\/p> <\/li> \n<li><p><samp class=\"codeph\">directory<\/samp>: Directory that contains the entry.<\/p> <\/li> \n<li><p><samp class=\"codeph\">size<\/samp>: Directory entry size.<\/p> <\/li> \n<li><p><samp class=\"codeph\">type<\/samp>: File type: <samp class=\"codeph\">file<\/samp>, for a file; <samp class=\"codeph\">dir<\/samp>, for a directory.<\/p> <\/li> \n<li><p><samp class=\"codeph\">dateLastModified<\/samp>: The date that an entry was last modified.<\/p> <\/li> \n<li><p><samp class=\"codeph\">attributes<\/samp>: File attributes, if applicable.<\/p> <\/li> \n<li><p><samp class=\"codeph\">mode<\/samp>: Empty column; retained for backward compatibility with ColdFusion 5 applications on UNIX.<\/p> <\/li><br>Use the following result columns in standard CFML expressions, preceding the result column name with the query name:<br>#mydirectory.name# \r\n#mydirectory.directory# \r\n#mydirectory.size# \r\n#mydirectory.type# \r\n#mydirectory.dateLastModified# \r\n#mydirectory.attributes# \r\n#mydirectory.mode#<br><span class=\"notetitle\">Note: <\/span>If the \n<samp class=\"codeph\">cfdirectory<\/samp> tag does not appear to work, for example, if a list operation returns an empty result set, make sure that you have correct permissions to access the directory. For example, if you run ColdFusion as a service on Windows, it operates by default as System, and cannot access directories on a remote system or mapped drive; to resolve this issue, do not run ColdFusion using the local system account.<br>The <samp class=\"codeph\">filter<\/samp> attribute specifies a pattern of one or more characters. All names that match that pattern are included in the list. On Windows systems, pattern matching ignores text case, on UNIX and Linux, pattern matches are case-sensitive.<br>The following two characters have special meaning in the pattern and are called metacharacters:<br><li><p>The asterisk (*) matches any zero or more characters.<\/p> <\/li> \n<li><p>The question mark (?) matches any single character.<\/p> <\/li><br>The following table shows examples of patterns and filenames that they match:<br><table border=\"1\" cellpadding=\"4\" cellspacing=\"0\">\n <thead align=\"left\">\n  <tr>\n   <th valign=\"top\" width=\"NaN%\" id=\"d17e20042\"><p>Pattern<\/p> <\/th> \n   <th valign=\"top\" width=\"NaN%\" id=\"d17e20045\"><p>Matches<\/p> <\/th> \n  <\/tr> \n <\/thead> \n <tbody>\n  <tr>\n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20042 \"><p>foo.*<\/p> <\/td> \n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20045 \"><p>Any file called foo with any extension; for example, foo.html, foo.cfm, and foo.xml.<\/p> <\/td> \n  <\/tr> \n  <tr>\n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20042 \"><p>*.html<\/p> <\/td> \n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20045 \"><p>All files with the suffix .html, but not files with the suffix .htm.<\/p> <\/td> \n  <\/tr> \n  <tr>\n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20042 \"><p>??<\/p> <\/td> \n   <td valign=\"top\" width=\"NaN%\" headers=\"d17e20045 \"><p>All files with two-character names.<\/p> <\/td> \n  <\/tr> \n <\/tbody> \n<\/table><br>","Attribute":[{"REQOROPT":"Required","DESCRIPTION":"Absolute pathname of directory against which to perform action. You can use an IP address, as in the following example: <cfdirectory directory=\"\/\/12.3.123.123\/c_drive\/\" name=\"dirQuery\" action=\"LIST\">","default":"","Attribute":"directory"},{"REQOROPT":"Optional","DESCRIPTION":"list: returns a query record set of the files in the specified directory. The directory entries \".\" (dot) and \"..\" (dot dot), which represent the current directory and the parent directory, are not returned. create delete rename","default":"list","Attribute":"action"},{"REQOROPT":"Optional if action = \"list\"","DESCRIPTION":"File extension filter applied to returned names, for example, *.cfm. One filter can be applied.","default":"","Attribute":"filter"},{"REQOROPT":"Optional","DESCRIPTION":"all: includes all information in the result set. name: includes only filenames in the result set.","default":"all","Attribute":"listinfo"},{"REQOROPT":"Optional","DESCRIPTION":"Used with action = \"create\". Permissions. Applies only to UNIX and Linux. Octal values of chmod command. Assigned to owner, group, and other, respectively, for example: 644: assigns read\/write permission to owner; read permission to group and other. 777: assigns read\/write\/execute permission to all.","default":"","Attribute":"mode"},{"REQOROPT":"Required if action = \"list\"","DESCRIPTION":"Name for output record set.","default":"","Attribute":"name"},{"REQOROPT":"Required if action = \"rename\"","DESCRIPTION":"New name for directory.","default":"","Attribute":"newDirectory"},{"REQOROPT":"Optional","DESCRIPTION":"Whether ColdFusion performs the action on subdirectories: yes no Valid for action=\"list\" and action=\"delete\".","default":false,"Attribute":"recurse"},{"REQOROPT":"Optional; used if action = \"list\"","DESCRIPTION":"Query columns by which to sort a directory listing. Delimited list of columns from query output. To qualify a column, use one of the following values: asc: ascending (a to z) sort order. desc: descending (z to a) sort order. For example: sort = \"directory ASC, size DESC, datelastmodified\"","default":"ASC","Attribute":"sort"},{"REQOROPT":"Optional; used if action = \"create\"","DESCRIPTION":"An array of struct where each struct represents a permission or grant. For details, see Using Amazon S3 storage in Developing Adobe ColdFusion 9 Applications","default":" ","Attribute":"storeACL"},{"REQOROPT":"Optional; used if action = \"create\"","DESCRIPTION":"Used to change the location of the created bucket. The location can either be EU, US, or US-WEST. For details, see Using Amazon S3 storage in Developing Adobe ColdFusion 9 Applications.","default":"US","Attribute":"StoreLocation"},{"REQOROPT":"Optional","DESCRIPTION":"file: includes only filenames. dir: includes only directory names. all: includes both filenames and directory names.","default":"all","Attribute":"type"},{"REQOROPT":"Optional","DESCRIPTION":"Used to change the location of the created bucket. The location can either be EU or US. The default location is US.","default":" ","Attribute":"storeLocation"},{"REQOROPT":"Optional","DESCRIPTION":"An array of struct where each struct represents a permission or grant.","default":" ","Attribute":"storeACL"}]}