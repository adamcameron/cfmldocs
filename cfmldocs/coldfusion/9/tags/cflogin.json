{"HISTORY":"<!-- --><br>ColdFusion 8: The <samp class=\"codeph\">applicationtoken<\/samp> attribute lets you specify a unique application identifier for each application, or the same value for multiple applications.<br>ColdFusion MX 6.1: Changed behavior: the <samp class=\"codeph\">cflogin<\/samp> variable exists when ColdFusion receives a request with NTLM or Digest (HTTP Negotiated header) authentication information.<br>ColdFusion MX: Added this tag.<br>","SYNTAX":"<!-- --><br>&lt;cflogin \r\n    applicationToken = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">token<\/i>&quot; \r\n    cookieDomain = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">domain<\/i>&quot; \r\n    idletimeout = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">value<\/i>&quot;&gt; \r\n    ... \r\n    &lt;cfloginuser \r\n        name = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">name<\/i>&quot; \r\n        password = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">password<\/i>&quot; \r\n        roles = &quot;<i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">roles<\/i>&quot;&gt; \r\n&lt;\/cflogin&gt;<br>","CATEGORY":"Security tags","PAGENAME":"cflogin","SEEALSO":"<!-- --><br><samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-7c5c.html\">cfloginuser<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-7c5b.html\">cflogout<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-7c57.html\">GetAuthUser<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-71e8.html\">GetUserRoles<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-7d95.html\">IsUserInAnyRole<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-71e6.html\">IsUserInRole<\/a><\/samp>, <samp class=\"codeph\"><a href=\"WSc3ff6d0ea77859461172e0811cbec22c24-71e5.html\">IsUserLoggedIn<\/a><\/samp>, <samp class=\"codeph\"><a href=\"http:\/\/help.adobe.com\/en_US\/ColdFusion\/9.0\/Developing\/WSc3ff6d0ea77859461172e0811cbec22c24-7e34.html\" target=\"_self\">Securing Applications<\/a><\/samp> in the <i xmlns:fn=\"http:\/\/www.w3.org\/2005\/xpath-functions\" xmlns:fo=\"http:\/\/www.w3.org\/1999\/XSL\/Format\" xmlns:xs=\"http:\/\/www.w3.org\/2001\/XMLSchema\">Developing ColdFusion Applications<\/i><br>","DESCRIPTION":"A container for user login and authentication code. ColdFusion runs the code in this tag if a user is not already logged in. You put code in the tag that authenticates the user and identifies the user with a set of roles. Used with cfloginuser tag.","LICENCE":"http:\/\/help.adobe.com\/en_US\/ColdFusion\/10.0\/LegalNotices\/index.html","EXAMPLE":"<!-- --><br>The following example shows a simple authentication. This code is typically in the Application.cfc <samp class=\"codeph\">onRequestStart<\/samp> method or in the application.cfm page.<br>&lt;cflogin&gt; \r\n    &lt;cfif NOT IsDefined(&quot;cflogin&quot;)&gt; \r\n        &lt;cfinclude template=&quot;loginform.cfm&quot;&gt; \r\n        &lt;cfabort&gt; \r\n    &lt;cfelse&gt; \r\n        &lt;cfif cflogin.name eq &quot;admin&quot;&gt; \r\n            &lt;cfset roles = &quot;user,admin&quot;&gt; \r\n        &lt;cfelse&gt; \r\n            &lt;cfset roles = &quot;user&quot;&gt; \r\n        &lt;\/cfif&gt; \r\n        &lt;cfloginuser name = &quot;#cflogin.name#&quot; password = &quot;#cflogin.password#&quot; \r\n            roles = &quot;#roles#&quot;\/&gt; \r\n    &lt;\/cfif&gt; \r\n&lt;\/cflogin&gt;<br>The following view-only example checks the user ID and password against a data source:<br>&lt;cfquery name=&quot;qSecurity&quot; \r\n    datasource=&quot;UserRolesDb&quot;&gt; \r\n    SELECT Roles FROM SecurityRoles \r\n    WHERE username=&lt;cfqueryparam value='#cflogin.name#' CFSQLTYPE=&quot;CF_SQL_VARCHAR&quot; \r\n    AND password=&lt;cfqueryparam value='#cflogin.password#' CFSQLTYPE='CF_SQL_VARCHAR' \r\n&lt;\/cfquery&gt; \r\n \r\n&lt;cfif qSecurity.recordcount gt 0&gt; \r\n&lt;cfloginuser name = &quot;#cflogin.name#&quot; \r\n    password = &quot;#cflogin.password#&quot; \r\n    roles = &quot;#trim(qSecurity.Roles)#&quot; &gt; \r\n&lt;\/cfif&gt;<br>","USAGE":"<!-- --><br>The body of this tag executes only if there is no logged-in user. When using application-based security, you put code in the body of the <samp class=\"codeph\">cflogin<\/samp> tag to check the user-provided ID and password against a data source, LDAP directory, or other repository of login identification. The body must include a <samp class=\"codeph\">cfloginuser<\/samp> tag to establish the authenticated user's identity in ColdFusion.<br>You control the data source and are responsible for coding the SQL within the <samp class=\"codeph\">cflogin<\/samp> tag; make sure that the associated database has user, password, and role information.<br>The <samp class=\"codeph\">cflogin<\/samp> tag has a built-in <samp class=\"codeph\">cflogin<\/samp> structure that contains two variables, <samp class=\"codeph\">cflogin.name<\/samp> and <samp class=\"codeph\">cflogin.password<\/samp>, if the page is executing in response to any of the following:<br><li><p>Submission of a form that contains input fields with the names <samp class=\"codeph\">j_username<\/samp> and <samp class=\"codeph\">j_password<\/samp>.<\/p> <\/li> \n<li><p>A request that uses HTTP Basic authentication and, therefore, includes an Authorization header with the user name and password.<\/p> <\/li> \n<li><p>A request that uses NTLM or Digest authentication. In this case, the username and password are hashed using a one-way algorithm in the Authorization header; ColdFusion gets the username from the web server and sets the <samp class=\"codeph\">cflogin.password<\/samp> value to the empty string.<\/p> <p>You can use these values in the <samp class=\"codeph\">cflogin<\/samp> tag body to authenticate the user, and, in the <samp class=\"codeph\">cfloginuser<\/samp> tag, to log the user in. The structure is only available in the <samp class=\"codeph\">cflogin<\/samp> tag body.<\/p> <\/li><br>","Attribute":[{"REQOROPT":"Optional","DESCRIPTION":"The login that applies to the application. To let users log in to only one application, specify a unique value for that application. To let users log in to multiple applications, specify the same value for those applications. If you do not set a value for the applicationtoken attribute, the default value is CFAUTHORIZATION_applicationname.","default":"The current application name","Attribute":"applicationtoken"},{"REQOROPT":"Optional","DESCRIPTION":"Domain of the cookie that is used to mark a user as logged in. Use this attribute to enable a user login cookie to work with multiple clustered servers in the same domain.","default":"","Attribute":"cookiedomain"},{"REQOROPT":"Optional","DESCRIPTION":"Time interval, in seconds, after which ColdFusion logs off the user.","default":1800,"Attribute":"idletimeout"}]}